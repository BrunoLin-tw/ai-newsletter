<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>AI Daily Newsletter - æª”æ¡ˆ</title>
  <link rel="stylesheet" href="/ai-newsletter/assets/style.css">
  <script src="/ai-newsletter/assets/app.js"></script>
</head>
<body>
  <nav class="navbar">
    <div class="container">
      <ul class="nav-links">
        <li><a href="/ai-newsletter/">ğŸ“° æœ€æ–°</a></li>
        <li><a href="/ai-newsletter/archive.html" class="active">ğŸ“š æª”æ¡ˆ</a></li>
        <li><a href="/ai-newsletter/search.html">ğŸ” æœå°‹</a></li>
      </ul>
    </div>
  </nav>

  <div class="container">
    <header>
      <h1>ğŸ¤– AI Daily Newsletter</h1>
      <p class="subtitle">é›»å­å ±æª”æ¡ˆé¤¨ - æŒ‰æœˆä»½åˆ†é¡</p>
    </header>

    <main id="main-content">
      <div class="loading">è¼‰å…¥ä¸­...</div>
    </main>

    <footer>
      <p>Generated by OpenClaw Agent | <a href="https://github.com/BrunoLin-tw/ai-newsletter">GitHub Repo</a></p>
    </footer>
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', function() {
      loadArchiveByMonth();
    });

    async function loadArchiveByMonth() {
      try {
        const response = await fetch('/ai-newsletter/assets/reports-data.json');
        const data = await response.json();
        
        // æŒ‰æœˆä»½åˆ†çµ„
        const groupedByMonth = {};
        data.reports.forEach(report => {
          const [year, month] = report.date.split('-');
          const monthKey = `${year}-${month}`;
          if (!groupedByMonth[monthKey]) {
            groupedByMonth[monthKey] = [];
          }
          groupedByMonth[monthKey].push(report);
        });
        
        // æŒ‰æœˆä»½å€’åº
        const months = Object.keys(groupedByMonth).sort().reverse();
        
        const html = months.map(month => {
          const reports = groupedByMonth[month];
          return `
            <div class="month-group">
              <h3 class="month-header" onclick="toggleMonth(this)">ğŸ“… ${month} (${reports.length} ç¯‡) â–¼</h3>
              <div class="month-content" style="display: block;">
                ${reports.map(report => `
                  <div class="report-item">
                    <strong>${report.title}</strong>
                    <small>${formatDate(report.date)}</small>
                    <a href="${report.link}" class="btn-small">æŸ¥çœ‹</a>
                  </div>
                `).join('')}
              </div>
            </div>
          `;
        }).join('');
        
        document.getElementById('main-content').innerHTML = html;
      } catch (error) {
        document.getElementById('main-content').innerHTML = '<p style="color: red;">è¼‰å…¥å¤±æ•—</p>';
        console.error('Error:', error);
      }
    }

    function toggleMonth(header) {
      const content = header.nextElementSibling;
      content.style.display = content.style.display === 'none' ? 'block' : 'none';
      header.textContent = header.textContent.includes('â–¼') 
        ? header.textContent.replace('â–¼', 'â–¶')
        : header.textContent.replace('â–¶', 'â–¼');
    }

    function formatDate(dateStr) {
      const date = new Date(dateStr);
      return date.toLocaleDateString('zh-TW', { year: 'numeric', month: '2-digit', day: '2-digit' });
    }
  </script>
</body>
</html>